<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Secreto</title>
  <style>
    body {
      font-family: 'Inter', 'Segoe UI', Roboto, sans-serif;
      background: #121212;
      color: #fff;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .wrapper {
      width: 95%;
      max-width: 900px;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .translator {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    textarea {
      flex: 1;
      min-height: 220px;
      resize: none;
      padding: 1rem;
      font-size: 1rem;
      border-radius: 12px;
      border: none;
      outline: none;
      background: #1f1f2f;
      color: #f5f5f5;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.3);
      transition: all 0.2s;
    }
    textarea:focus {
      background: #2a2a40;
    }
    .actions {
      display: flex;
      justify-content: flex-end;
      gap: 0.8rem;
    }
    button {
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 6px;
      background: #0078d7;
      color: white;
      font-size: 0.95rem;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.2s, transform 0.1s;
    }
    button:hover { background: #005fa3; transform: translateY(-1px); }
    @media(max-width: 768px) {
      .translator { flex-direction: column; }
      textarea { min-height: 150px; }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="translator">
      <textarea id="inputText" placeholder="Normal..."></textarea>
      <textarea id="outputText" placeholder="Secret..." readonly></textarea>
    </div>
    <div class="actions">
      <button onclick="swap()">â‡„ Inverser</button>
      <button onclick="copyOutput()">ðŸ“‹ Copier</button>
    </div>
  </div>

  <script>
    // Alphabet inversÃ© mais voyelles restent voyelles, consonnes restent consonnes
    const dict = {
      // Voyelles
      "a": "e", "e": "i", "i": "o", "o": "u", "u": "a",
      // Consonnes (rotation simple)
      "b": "c", "c": "d", "d": "f", "f": "g", "g": "h", "h": "j",
      "j": "k", "k": "l", "l": "m", "m": "n", "n": "p", "p": "q",
      "q": "r", "r": "s", "s": "t", "t": "v", "v": "w", "w": "x",
      "x": "y", "y": "z", "z": "b",
      " ": " "
    };

    const reverseDict = Object.fromEntries(
      Object.entries(dict).map(([k, v]) => [v, k])
    );

    let mode = "fr2code";

    function encrypt(text) {
      let step1 = text.toLowerCase().split("").map(ch => dict[ch] || ch).join("");
      let step2 = step1.split("").reverse().join("");
      return step2;
    }

    function decrypt(text) {
      let step1 = text.split("").reverse().join("");
      let step2 = step1.split("").map(ch => reverseDict[ch] || ch).join("");
      return step2;
    }

    function update() {
      const input = document.getElementById("inputText").value;
      let result = mode === "fr2code" ? encrypt(input) : decrypt(input);
      document.getElementById("outputText").value = result;
    }

    function swap() {
      mode = (mode === "fr2code") ? "code2fr" : "fr2code";
      const left = document.getElementById("inputText").value;
      document.getElementById("inputText").value = document.getElementById("outputText").value;
      document.getElementById("outputText").value = left;
      update();
    }

    function copyOutput() {
      const out = document.getElementById("outputText");
      out.select();
      document.execCommand("copy");
      alert("Texte copiÃ© !");
    }

    document.getElementById("inputText").addEventListener("input", update);
  </script>
</body>
</html>
